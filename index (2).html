<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theo D√µi T·∫≠p T√≠nh Nai Nu√¥i Nh·ªët</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Sarabun', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #064e3b 0%, #065f46 50%, #047857 100%);
            min-height: 100vh;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('https://images.unsplash.com/photo-1484406566174-9da000fda645?w=1920&q=80');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.15;
            z-index: -1;
        }
        
        .deer-icon {
            font-size: 80px;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
        }
        
        .glass-card {
            background: rgba(6, 78, 59, 0.85);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(250, 204, 21, 0.3);
        }
        
        .stat-card {
            background: linear-gradient(135deg, rgba(250, 204, 21, 0.2) 0%, rgba(6, 78, 59, 0.8) 100%);
            border: 2px solid rgba(250, 204, 21, 0.5);
        }
        
        .table-row:hover {
            background: rgba(250, 204, 21, 0.1);
        }
        
        input, select, textarea {
            background: rgba(255, 255, 255, 0.1) !important;
            border: 1px solid rgba(250, 204, 21, 0.5) !important;
            color: #fde047 !important;
        }
        
        input::placeholder, textarea::placeholder {
            color: rgba(250, 204, 21, 0.6) !important;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none !important;
            border-color: #facc15 !important;
            box-shadow: 0 0 10px rgba(250, 204, 21, 0.3) !important;
        }
        
        option {
            background: #064e3b;
            color: #fde047;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #facc15 0%, #eab308 100%);
            color: #064e3b;
            font-weight: 700;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(250, 204, 21, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
        }
        
        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(220, 38, 38, 0.4);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body class="text-yellow-300 p-4 md:p-8">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-8 animate-fade-in">
            <div class="deer-icon mb-2">ü¶å</div>
            <h1 class="text-4xl md:text-5xl font-bold text-yellow-400 mb-2 drop-shadow-lg">
                Theo D√µi T·∫≠p T√≠nh Nai Nu√¥i Nh·ªët
            </h1>
            <p class="text-yellow-300/80 text-lg">H·ªá th·ªëng ghi nh·∫≠n v√† ph√¢n t√≠ch h√†nh vi h√†ng ng√†y</p>
        </header>

        <!-- Statistics Cards -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 animate-fade-in">
            <div class="stat-card rounded-xl p-4 text-center">
                <div class="text-3xl mb-1">üìä</div>
                <div class="text-2xl font-bold text-yellow-400" id="totalRecords">0</div>
                <div class="text-sm text-yellow-300/70">T·ªïng ghi nh·∫≠n</div>
            </div>
            <div class="stat-card rounded-xl p-4 text-center">
                <div class="text-3xl mb-1">ü¶å</div>
                <div class="text-2xl font-bold text-yellow-400" id="totalDeer">0</div>
                <div class="text-sm text-yellow-300/70">S·ªë nai theo d√µi</div>
            </div>
            <div class="stat-card rounded-xl p-4 text-center">
                <div class="text-3xl mb-1">üíö</div>
                <div class="text-2xl font-bold text-yellow-400" id="healthyCount">0</div>
                <div class="text-sm text-yellow-300/70">S·ª©c kh·ªèe t·ªët</div>
            </div>
            <div class="stat-card rounded-xl p-4 text-center">
                <div class="text-3xl mb-1">üìÖ</div>
                <div class="text-2xl font-bold text-yellow-400" id="todayRecords">0</div>
                <div class="text-sm text-yellow-300/70">H√¥m nay</div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid md:grid-cols-2 gap-6">
            <!-- Form Section -->
            <div class="glass-card rounded-2xl p-6 animate-fade-in">
                <h2 class="text-2xl font-bold text-yellow-400 mb-6 flex items-center gap-2">
                    <span>üìù</span> Ghi Nh·∫≠n T·∫≠p T√≠nh
                </h2>
                
                <form id="behaviorForm" class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-yellow-400 mb-1 text-sm font-semibold">M√£ s·ªë nai *</label>
                            <input type="text" id="deerId" required placeholder="VD: NAI-001" 
                                class="w-full px-4 py-2 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-yellow-400 mb-1 text-sm font-semibold">Ng√†y ghi nh·∫≠n *</label>
                            <input type="date" id="date" required 
                                class="w-full px-4 py-2 rounded-lg">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-yellow-400 mb-1 text-sm font-semibold">Th·ªùi gian *</label>
                            <input type="time" id="time" required 
                                class="w-full px-4 py-2 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-yellow-400 mb-1 text-sm font-semibold">T√¨nh tr·∫°ng s·ª©c kh·ªèe</label>
                            <select id="health" class="w-full px-4 py-2 rounded-lg">
                                <option value="T·ªët">üü¢ T·ªët</option>
                                <option value="B√¨nh th∆∞·ªùng">üü° B√¨nh th∆∞·ªùng</option>
                                <option value="Y·∫øu">üü† Y·∫øu</option>
                                <option value="B·ªánh">üî¥ B·ªánh</option>
                            </select>
                        </div>
                    </div>

                    <div>
                        <label class="block text-yellow-400 mb-1 text-sm font-semibold">Ho·∫°t ƒë·ªông ch√≠nh</label>
                        <select id="activity" class="w-full px-4 py-2 rounded-lg">
                            <option value="ƒÇn c·ªè">üåø ƒÇn c·ªè</option>
                            <option value="U·ªëng n∆∞·ªõc">üíß U·ªëng n∆∞·ªõc</option>
                            <option value="Ngh·ªâ ng∆°i">üò¥ Ngh·ªâ ng∆°i</option>
                            <option value="Di chuy·ªÉn">üö∂ Di chuy·ªÉn</option>
                            <option value="Nhai l·∫°i">üîÑ Nhai l·∫°i</option>
                            <option value="Giao ti·∫øp">üó£Ô∏è Giao ti·∫øp v·ªõi ƒë√†n</option>
                            <option value="ƒê·ª©ng im">üßç ƒê·ª©ng im quan s√°t</option>
                            <option value="Ch·∫£i l√¥ng">‚ú® Ch·∫£i l√¥ng/t·ª± v·ªá sinh</option>
                        </select>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-yellow-400 mb-1 text-sm font-semibold">L∆∞·ª£ng th·ª©c ƒÉn (kg)</label>
                            <input type="number" id="foodAmount" step="0.1" min="0" placeholder="0.0"
                                class="w-full px-4 py-2 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-yellow-400 mb-1 text-sm font-semibold">L∆∞·ª£ng n∆∞·ªõc (l√≠t)</label>
                            <input type="number" id="waterAmount" step="0.1" min="0" placeholder="0.0"
                                class="w-full px-4 py-2 rounded-lg">
                        </div>
                    </div>

                    <div>
                        <label class="block text-yellow-400 mb-1 text-sm font-semibold">H√†nh vi ƒë·∫∑c bi·ªát</label>
                        <div class="grid grid-cols-2 gap-2 text-sm">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" id="aggressive" class="w-4 h-4 accent-yellow-400">
                                <span>‚ö†Ô∏è Hung d·ªØ</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" id="isolated" class="w-4 h-4 accent-yellow-400">
                                <span>üîï T√°ch ƒë√†n</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" id="mating" class="w-4 h-4 accent-yellow-400">
                                <span>üíï ƒê·ªông d·ª•c</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" id="nervous" class="w-4 h-4 accent-yellow-400">
                                <span>üò∞ Lo l·∫Øng</span>
                            </label>
                        </div>
                    </div>

                    <div>
                        <label class="block text-yellow-400 mb-1 text-sm font-semibold">Ghi ch√∫ th√™m</label>
                        <textarea id="notes" rows="3" placeholder="Nh·∫≠p ghi ch√∫ v·ªÅ t·∫≠p t√≠nh ƒë·∫∑c bi·ªát..."
                            class="w-full px-4 py-2 rounded-lg resize-none"></textarea>
                    </div>

                    <button type="submit" class="btn-primary w-full py-3 rounded-xl text-lg">
                        üíæ L∆∞u Ghi Nh·∫≠n
                    </button>
                </form>
            </div>

            <!-- Records List -->
            <div class="glass-card rounded-2xl p-6 animate-fade-in">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-yellow-400 flex items-center gap-2">
                        <span>üìã</span> L·ªãch S·ª≠ Ghi Nh·∫≠n
                    </h2>
                    <div class="flex gap-2">
                        <input type="text" id="searchInput" placeholder="üîç T√¨m ki·∫øm..." 
                            class="px-3 py-1 rounded-lg text-sm w-32">
                        <button onclick="exportData()" class="bg-yellow-500/20 hover:bg-yellow-500/30 px-3 py-1 rounded-lg text-sm text-yellow-400 border border-yellow-500/50">
                            üì• Xu·∫•t
                        </button>
                    </div>
                </div>
                
                <div id="recordsList" class="space-y-3 max-h-[500px] overflow-y-auto pr-2">
                    <p class="text-center text-yellow-300/50 py-8">Ch∆∞a c√≥ ghi nh·∫≠n n√†o</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center mt-8 text-yellow-300/50 text-sm">
            <p>ü¶å H·ªá th·ªëng theo d√µi t·∫≠p t√≠nh nai nu√¥i nh·ªët ¬© 2024</p>
        </footer>
    </div>

    <script>
        // Initialize
        let records = JSON.parse(localStorage.getItem('deerRecords')) || [];
        
        // Set default date to today
        document.getElementById('date').valueAsDate = new Date();
        document.getElementById('time').value = new Date().toTimeString().slice(0, 5);
        
        // Form submit handler
        document.getElementById('behaviorForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const specialBehaviors = [];
            if (document.getElementById('aggressive').checked) specialBehaviors.push('Hung d·ªØ');
            if (document.getElementById('isolated').checked) specialBehaviors.push('T√°ch ƒë√†n');
            if (document.getElementById('mating').checked) specialBehaviors.push('ƒê·ªông d·ª•c');
            if (document.getElementById('nervous').checked) specialBehaviors.push('Lo l·∫Øng');
            
            const record = {
                id: Date.now(),
                deerId: document.getElementById('deerId').value.toUpperCase(),
                date: document.getElementById('date').value,
                time: document.getElementById('time').value,
                health: document.getElementById('health').value,
                activity: document.getElementById('activity').value,
                foodAmount: parseFloat(document.getElementById('foodAmount').value) || 0,
                waterAmount: parseFloat(document.getElementById('waterAmount').value) || 0,
                specialBehaviors: specialBehaviors,
                notes: document.getElementById('notes').value
            };
            
            records.unshift(record);
            saveRecords();
            renderRecords();
            updateStats();
            
            // Reset form
            this.reset();
            document.getElementById('date').valueAsDate = new Date();
            document.getElementById('time').value = new Date().toTimeString().slice(0, 5);
            
            // Show success message
            showNotification('‚úÖ ƒê√£ l∆∞u ghi nh·∫≠n th√†nh c√¥ng!');
        });
        
        // Render records
        function renderRecords(filter = '') {
            const container = document.getElementById('recordsList');
            let filteredRecords = records;
            
            if (filter) {
                filter = filter.toLowerCase();
                filteredRecords = records.filter(r => 
                    r.deerId.toLowerCase().includes(filter) ||
                    r.activity.toLowerCase().includes(filter) ||
                    r.notes.toLowerCase().includes(filter)
                );
            }
            
            if (filteredRecords.length === 0) {
                container.innerHTML = '<p class="text-center text-yellow-300/50 py-8">Kh√¥ng c√≥ ghi nh·∫≠n n√†o</p>';
                return;
            }
            
            container.innerHTML = filteredRecords.map(record => {
                const healthIcon = {
                    'T·ªët': 'üü¢',
                    'B√¨nh th∆∞·ªùng': 'üü°',
                    'Y·∫øu': 'üü†',
                    'B·ªánh': 'üî¥'
                }[record.health] || '‚ö™';
                
                const activityIcon = {
                    'ƒÇn c·ªè': 'üåø',
                    'U·ªëng n∆∞·ªõc': 'üíß',
                    'Ngh·ªâ ng∆°i': 'üò¥',
                    'Di chuy·ªÉn': 'üö∂',
                    'Nhai l·∫°i': 'üîÑ',
                    'Giao ti·∫øp': 'üó£Ô∏è',
                    'ƒê·ª©ng im': 'üßç',
                    'Ch·∫£i l√¥ng': '‚ú®'
                }[record.activity] || 'üìå';
                
                return `
                    <div class="table-row bg-green-900/30 rounded-xl p-4 border border-yellow-500/20 transition-all">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center gap-2">
                                <span class="text-2xl">ü¶å</span>
                                <div>
                                    <span class="font-bold text-yellow-400">${record.deerId}</span>
                                    <span class="text-yellow-300/60 text-sm ml-2">${formatDate(record.date)} - ${record.time}</span>
                                </div>
                            </div>
                            <button onclick="deleteRecord(${record.id})" class="text-red-400 hover:text-red-300 text-sm px-2 py-1 rounded hover:bg-red-500/20">
                                üóëÔ∏è
                            </button>
                        </div>
                        <div class="grid grid-cols-2 gap-2 text-sm mb-2">
                            <div>${healthIcon} S·ª©c kh·ªèe: <span class="text-yellow-400">${record.health}</span></div>
                            <div>${activityIcon} ${record.activity}</div>
                            <div>üçΩÔ∏è Th·ª©c ƒÉn: <span class="text-yellow-400">${record.foodAmount} kg</span></div>
                            <div>üíß N∆∞·ªõc: <span class="text-yellow-400">${record.waterAmount} L</span></div>
                        </div>
                        ${record.specialBehaviors.length > 0 ? `
                            <div class="text-sm mb-2">
                                <span class="text-yellow-400/70">H√†nh vi ƒë·∫∑c bi·ªát:</span>
                                ${record.specialBehaviors.map(b => `<span class="inline-block bg-yellow-500/20 px-2 py-0.5 rounded text-xs ml-1">${b}</span>`).join('')}
                            </div>
                        ` : ''}
                        ${record.notes ? `<div class="text-sm text-yellow-300/70 italic">üìù ${record.notes}</div>` : ''}
                    </div>
                `;
            }).join('');
        }
        
        // Delete record
        function deleteRecord(id) {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a ghi nh·∫≠n n√†y?')) {
                records = records.filter(r => r.id !== id);
                saveRecords();
                renderRecords();
                updateStats();
                showNotification('üóëÔ∏è ƒê√£ x√≥a ghi nh·∫≠n!');
            }
        }
        
        // Save to localStorage
        function saveRecords() {
            localStorage.setItem('deerRecords', JSON.stringify(records));
        }
        
        // Update statistics
        function updateStats() {
            const today = new Date().toISOString().split('T')[0];
            const uniqueDeer = [...new Set(records.map(r => r.deerId))];
            const healthyRecords = records.filter(r => r.health === 'T·ªët');
            const todayRecords = records.filter(r => r.date === today);
            
            document.getElementById('totalRecords').textContent = records.length;
            document.getElementById('totalDeer').textContent = uniqueDeer.length;
            document.getElementById('healthyCount').textContent = healthyRecords.length;
            document.getElementById('todayRecords').textContent = todayRecords.length;
        }
        
        // Format date
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('vi-VN');
        }
        
        // Export data
        function exportData() {
            if (records.length === 0) {
                showNotification('‚ö†Ô∏è Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ xu·∫•t!');
                return;
            }
            
            let csv = 'M√£ nai,Ng√†y,Gi·ªù,S·ª©c kh·ªèe,Ho·∫°t ƒë·ªông,Th·ª©c ƒÉn (kg),N∆∞·ªõc (L),H√†nh vi ƒë·∫∑c bi·ªát,Ghi ch√∫\n';
            records.forEach(r => {
                csv += `${r.deerId},${r.date},${r.time},${r.health},${r.activity},${r.foodAmount},${r.waterAmount},"${r.specialBehaviors.join(', ')}","${r.notes}"\n`;
            });
            
            const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `nai_taptinh_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            
            showNotification('üì• ƒê√£ xu·∫•t file CSV th√†nh c√¥ng!');
        }
        
        // Show notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-green-800 border border-yellow-500 text-yellow-400 px-6 py-3 rounded-xl shadow-lg z-50 animate-fade-in';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            renderRecords(e.target.value);
        });
        
        // Initial render
        renderRecords();
        updateStats();
    </script>
</body>
</html>
